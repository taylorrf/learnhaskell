title: Primeiras funções do seu filho

text: Na seção anterior nós aprendemos a idéia basica para chamada de funções. Agora vamos tentar fazer a nossa própria! Abra o seu editor de texto favorito e escreva a seguinte função que recebe um número e o multiplica por dois.

Funções são definidas de forma semelhante como são chamadas. O nome da função é seguido por parâmetros separados por espaços. Porém quando definimos funções, terá um [code]=[/code] e depois nós iremos definir o que a função faz. Salve isto como [code]baby.hs[/code] ou algo parecido. Agora vá até o local onde o arquivo foi salvo e rode o [code]ghgi[/code] a partir dai. Dentro do GCHI, digite [code]:l baby[/code]. Agora o script estará carregado e nós já podemos brincar com a função que definimos.

Como o [code]+[/code] funciona muito bem com números inteiros bem como com os números de ponto flutuante (ou qualquer outra coisa que pode ser considerada um número) a nossa função também funcionára com qualquer número. Vamos fazer uma função que recebe dois números e multiplica cada um deles por dois, e após realiza a soma deles. 

Simples. Nós podemos definir isso também como [code]doubleUs x y = x + x + y + y[/code]. Testar isto produzirá um resultado bastante previsível (lembre-se de anexar esta função no arquivo [code]baby.hs[/code], salva-lo e então rodar [code]:l baby[/code] dentro do GHCI).

Como esperado, você pode chamar suas próprias funções de outras funções que você fez. Com isto em mente, nós iremos redefinir [code]doubleUs[/code] da seguinte forma:

Este é um exemplo bastante simples de um padrão comum que você verá ao longo de Haskell. Ir fazendo funções básicas que são obviamente corretas e então combina-las em funções mais complexas. Deste forma você também acabará evitando repetições. E se alguns matemáticos descobrissem que 2 é na verdade 3 e você tivesse que mudar o seu programa? Você deveria então simplesmente redefinir o [code]doubleMe[/code] para ser [code]x + x + x[/code] e desde que [code]doubleUs[/code] chamasse [code]doubleMe[/code], já estaria funcionando automaticamente neste estranho mundo onde 2 é 3.

Funções em Haskell não precisam estar em um ordem em particular, portanto não importa se você definir primeiro o [code]doubleMe[/code] e depois o [code]doubleUs[/code] ou se fizer o contrário.

Agora vamos fazer uma função que multiplicará um número por 2 porém somente se este número for menor ou igual a 100, porque números maiores que 100 já são grandes o suficiente.

Neste ponto iremos introduzir o comando <i>if</i> do Haskell. Você provavelmente esta familiarizado com o comando <i>if</i> de outras linguagens. A diferença entre o comando <i>if</i> do Haskell e o comando <i>if</i> das linguagens imperativas é que a parte do <i>else</i> é obrigatória em Haskell. Em linguagens imperativas você pode simplesmente pular uma séria de etapas se a condição do <i>if</i> não for satisfatória, porém em Haskell toda expressão e função devem retornar alguma coisa. Poderíamos também escrever o comando <i>if</i> em uma só linha, mas eu acho esta forma mais legível. Outra coisa sobre o comando <i>if</i> em Haskell é que ele é uma <i>expressão</i>. Uma <i>expressão</i> é basicamente um pedaço de código que retorna um valor. [code]5[/code] é uma expressão porque isto retorna 5, [code]4 + 8[/code] é uma expressão, [code]x + y[/code] é uma expressão porque retorna a soma de [code]x[/code] e [code]y[/code]. Por causa do <i>else</i> ser obrigatório, um <i>if</i> sempre retornará alguma coisa porque ele é uma <i>expressão</i>. Se quisermos adicionar 1 para cada número que será produzido na nossa função anterior, podemos escrevê-la da seguinte forma.

Se tivessemos omitido os parênteses ele teria adicionado 1 somente se [code]x[/code] não fosse maior do que 100. Note o [code]'[/code] no final do nome da função. Aquela apóstrofe tem nenhum significado especial na sintaxe do Haskell. Ele é um caracter válido para ser usado em um nome de função. Normalmente nós utilizamos o [code]'[/code] para designar uma versão especifica de uma função (aqueles que não são preguiçosos) ou em uma versão levemente modificada de uma função ou variável. Pelo fato do [code]'[/code] ser um caracter válido em funções, nós podemos fazer uma função como esta:

Há duas observações bem interessantes aqui. A primeira é que no nome da função nós não podemos escrever o nome próprio Conan's em letras maiúsculas. Isto porque funções não podem começar com letras maíúsculas. Veremos o porque disto mais adiante. A segunda observação é que esta função não tem nenhum parâmetro. Quando uma função não tem nenhum parâmetro, nós normalmente chamamos isto de <i>definição</i> (ou um <i>nome</i>). Como não podemos alterar o que os nomes (e funções) significam após termos os definido, [code]conanO'Brien[/code] e a string [code]"It's a-me, Conan O'Brien!"[/code] podem ser usadas alternadamente.